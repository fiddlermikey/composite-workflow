name: test-n-dump
# run-name: ${{ github.actor }} is learning GitHub Actions in ${{ github.event.repository.name }}
on: [push, workflow_dispatch]
jobs:
  get-manifest-properties:
    runs-on: windows-latest
    outputs:
      update_catalog: ${{ steps.read-json.outputs.update_catalog }}
      integration_type:  ${{ steps.read-json.outputs.integration_type }}
    steps:
      - uses: actions/checkout@v3
      - name: Store json
        id: store-json
        shell: pwsh
        run: |
          $json = Get-Content integration-manifest.json | ConvertFrom-Json
          echo "::set-output name=update_catalog::$(echo $json.update_catalog)"
          echo "integration_type=bar" >> "$GITHUB_OUTPUT"
#          echo "::set-output name=integration_type::$(echo $json.integration_type)"

      - name: Read json
        id: read-json
        shell: pwsh
        run: |
          echo "update_catalog = ${{steps.store-json.outputs.update_catalog}}"
          echo "integration_type = ${{steps.store-json.outputs.integration_type}}"

      - name: Set color
        id: random-color-generator
        run: echo "SELECTED_COLOR=green" >> "$GITHUB_OUTPUT"
      - name: Get color

        run: echo "The selected color is ${{ steps.random-color-generator.outputs.SELECTED_COLOR }}"
