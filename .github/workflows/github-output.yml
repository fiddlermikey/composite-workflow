name: Update repository description
on: push

jobs:
  set-job-output:
    name: Set a property
    runs-on: ubuntu-latest
    outputs:
      foo: ${{ steps.update_description.outputs.foo }}
    steps:
      - name: Set foo
        id: update_description
        uses: actions/github-script@v6
        with:
          script: |
            console.log(`Setting the output step foo = bar`)
            core.exportVariable('foo','bar')
  show-job-output:
    name: Show property value
    runs-on: ubuntu-latest
    needs: set-job-output
    #if: needs.set-step-output.outputs.foo == 'bar'
    steps:
      - name: Update repository description
        id: update_description
        uses: actions/github-script@v6
        with:
          script: |
            const newVar = needs.set-job-output.outputs.foo
            console.log(`newvar is ${newVar}`)
